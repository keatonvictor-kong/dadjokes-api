_format_version: "1.1"
_workspace: dadjokes
consumers:
- keyauth_credentials:
  - key: "${ALICE_API_KEY}$"
  username: alice

plugins:

- name: key-auth
  service: dadjokes
  enabled: true
  config: 
    key_in_header: true
    key_in_query: false
    key_in_body: false
    key_names:
    - apikey

- name: rate-limiting
  service: dadjokes
  enabled: true
  config:
    policy: local  
    limit_by: consumer
    minute: 5 
    fault_tolerant: true
    hide_client_headers: false
  protocols:
  - grpc
  - grpcs
  - http
  - https